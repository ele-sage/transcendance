
{% extends request.htmx|yesno:"empty.html,base.html" %}

{% load crispy_forms_tags %}
{% block content %}

{% if not logged %}
<div class="overlay"></div>
<div class="content">
    <div class="form-container">
        <h1>Login</h1>
        <p class="text-muted">Don't have an account? <a href="/register/" hx-get="/register/" hx-target="#dynamic-content" hx-swap="outerHTML" hx-push-url="true">Register</a></p>
        <form hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-post="/login/" hx-target="#dynamic-content">
            {{ form|crispy }}
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
        <button onclick="authenticate()">Connect with 42</button>
    </div>
</div>
{% else %}
<div class="overlay"></div>
<div class="content">
    <div class="form-container">
    <h1>Logout</h1>
    <form hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-post="{% url 'logout' %}" hx-target="#dynamic-content">
        <button type="submit" class="btn btn-primary">Logout</button>
    </form>
    </div>
</div>
{% endif %}

{% load static %}
<script src="{% static 'js/oauth.js' %}"></script>
{% endblock %}